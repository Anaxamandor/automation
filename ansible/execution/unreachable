Ansible provides a magic variable called unreachable that can be used to retrieve the number of hosts that were unreachable during playbook execution. 
This variable is a dictionary that contains information about the unreachable hosts, such as the hostname and the reason for the failure.

To retrieve the number of unreachable hosts, you can use the length filter to count the number of items in the unreachable dictionary:



- name: Playbook example
  hosts: all
  tasks:
    # Your tasks here

  # Print the number of unreachable hosts
  post_tasks:
    - name: Print unreachable hosts
      debug:
        msg: "Number of unreachable hosts: {{ unreachable | length }}"
        
        
 Note that this variable only includes hosts that were marked as unreachable during the playbook execution. 
 It does not include hosts that failed for other reasons, such as a failed task or a syntax error in the playbook.
